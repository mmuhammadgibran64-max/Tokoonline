<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Menu - GIBRAN STORE</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body { background: #f8f9fa; padding-bottom: 100px; }
        .header { background: #ff6600; color: white; padding: 20px; border-radius: 0 0 20px 20px; }
        .card-produk { border: none; border-radius: 15px; text-align: center; background: white; height: 100%; }
        .btn-tambah { background: #ff6600; color: white; border: none; border-radius: 10px; width: 100%; padding: 8px; font-weight: bold; font-size: 11px; }
        .cart-bar { position: fixed; bottom: 20px; left: 15px; right: 15px; background: #333; color: white; padding: 15px; border-radius: 20px; display: none; justify-content: space-between; align-items: center; }
    </style>
</head>
<body>
    <div class="header d-flex justify-content-between align-items-center">
        <div><h5 class="fw-bold mb-0">ðŸ›’ GIBRAN STORE</h5><small id="userTxt"></small></div>
        <div class="d-flex gap-3"><a href="riwayat.html" class="text-white text-decoration-none">ðŸ“œ</a> <a href="index.html" onclick="localStorage.clear()" class="text-white text-decoration-none">ðŸšª</a></div>
    </div>

    <div class="container mt-4">
        <h6 class="fw-bold mb-3">Daftar Menu Produk</h6>
        <div class="row g-2" id="grid"></div>
    </div>

    <div class="cart-bar" id="bar">
        <div><span id="jml" class="badge bg-warning text-dark">0</span> <b id="tot">Rp 0</b></div>
        <button class="btn btn-warning btn-sm fw-bold" onclick="window.location.href='pembayaran.html'">Proses ke pembayaran âž”</button>
    </div>

    <script>
        document.getElementById('userTxt').innerText = "Halo, " + (localStorage.getItem('namaUser') || 'Pelanggan');
        const menu = [
            {n:'Peye Kacang (Kecil)', h:5000, i:'ðŸ¥œ'}, {n:'Peye Kacang (Besar)', h:10000, i:'ðŸ¥œ'},
            {n:'Slondok', h:20000, i:'ðŸ¥¨'}, {n:'Opak', h:20000, i:'ðŸª'},
            {n:'Kacang', h:2000, i:'ðŸ¥¡'}, {n:'Kripik Pedes', h:15000, i:'ðŸ”¥'},
            {n:'Kue Sus Kering', h:15000, i:'ðŸ§'}, {n:'Reginang (isi 3)', h:5000, i:'ðŸ˜'},
            {n:'Aqua Galon', h:22000, i:'ðŸ’§'}
        ];
        
        let cart = [];
        const grid = document.getElementById('grid');
        menu.forEach(p => {
            grid.innerHTML += `<div class="col-6"><div class="card card-produk p-3 shadow-sm">
                <div style="font-size:30px">${p.i}</div><h6 class="fw-bold small mt-2" style="height:35px">${p.n}</h6>
                <p class="text-danger fw-bold small">Rp ${p.h.toLocaleString()}</p>
                <button class="btn-tambah" onclick="tambah('${p.n}', ${p.h})">Tambah ke keranjang</button>
            </div></div>`;
        });

        function tambah(n, h) {
            cart.push({n, h});
            document.getElementById('bar').style.display = 'flex';
            let t = cart.reduce((s, i) => s + i.h, 0);
            document.getElementById('jml').innerText = cart.length + " Item";
            document.getElementById('tot').innerText = 'Rp ' + t.toLocaleString();
            localStorage.setItem('totalTerakhir', t);
            localStorage.setItem('detailPesanan', cart.map(i => i.n).join(', '));
        }
    </script>
</body>
</html>
