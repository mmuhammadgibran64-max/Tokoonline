<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Menu - GIBRAN STORE</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body { background: #f8f9fa; padding-bottom: 100px; }
        .navbar-top { background: #ff6600; color: white; padding: 15px; border-radius: 0 0 20px 20px; display: flex; justify-content: space-between; align-items: center; }
        .card-produk { border: none; border-radius: 15px; text-align: center; background: white; height: 100%; }
        .btn-tambah { background: #ff6600; color: white; border: none; border-radius: 8px; width: 100%; padding: 5px; font-weight: bold; font-size: 14px; }
        .cart-bar { position: fixed; bottom: 20px; left: 15px; right: 15px; background: #333; color: white; padding: 15px; border-radius: 15px; display: none; justify-content: space-between; align-items: center; z-index: 9999; }
    </style>
</head>
<body>
    <div class="navbar-top">
        <b id="displayNama">GIBRAN STORE</b>
        <div class="d-flex gap-3">
            <a href="riwayat.html" class="text-white text-decoration-none">üìú</a>
            <a href="pengaturan.html" class="text-white text-decoration-none">‚öôÔ∏è</a>
        </div>
    </div>

    <div class="container mt-4">
        <div class="row g-3" id="menuGrid"></div>
    </div>

    <div class="cart-bar" id="cartBar">
        <div><span id="jml" class="badge bg-warning text-dark">0</span> <b id="total">Rp 0</b></div>
        <button class="btn btn-warning btn-sm fw-bold" onclick="window.location.href='pembayaran.html'">Bayar ‚ûî</button>
    </div>

    <script>
        document.getElementById('displayNama').innerText = "Halo, " + (localStorage.getItem('namaUser') || 'Sobat');
        const menu = [
            {n:'Peye Kacang', h:5000, i:'ü•ú'}, {n:'Slondok', h:20000, i:'ü•®'},
            {n:'Opak', h:20000, i:'üç™'}, {n:'Kacang', h:2000, i:'ü•°'},
            {n:'Kripik Pedes', h:15000, i:'üî•'}, {n:'Aqua Galon', h:22000, i:'üíß'}
        ];
        const grid = document.getElementById('menuGrid');
        menu.forEach(p => {
            grid.innerHTML += `<div class="col-6"><div class="card card-produk p-3 shadow-sm">
                <div style="font-size:30px">${p.i}</div><h6 class="fw-bold small mt-2">${p.n}</h6>
                <p class="small fw-bold" style="color:#ff6600">Rp ${p.h.toLocaleString()}</p>
                <button class="btn-tambah" onclick="beli('${p.n}', ${p.h})">Tambah</button>
            </div></div>`;
        });

        let keranjang = [];
        function beli(n, h) {
            keranjang.push({n, h});
            document.getElementById('cartBar').style.display = 'flex';
            let tot = keranjang.reduce((s, i) => s + i.h, 0);
            document.getElementById('jml').innerText = keranjang.length;
            document.getElementById('total').innerText = 'Rp ' + tot.toLocaleString();
            localStorage.setItem('totalTerakhir', tot);
            localStorage.setItem('detailPesanan', keranjang.map(i => i.n).join(', '));
        }
    </script>
</body>
</html>
