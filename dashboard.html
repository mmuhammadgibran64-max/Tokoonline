<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Menu - GIBRAN STORE</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body { background: #f8f9fa; padding-bottom: 80px; }
        .header { background: #ff6600; color: white; padding: 20px; border-radius: 0 0 20px 20px; }
        .card-produk { border: none; border-radius: 15px; text-align: center; background: white; height: 100%; transition: 0.2s; }
        .card-produk:active { transform: scale(0.95); }
        .btn-add { background: #ff6600; color: white; border: none; border-radius: 10px; width: 100%; font-weight: bold; padding: 7px; }
        .cart-bar { position: fixed; bottom: 20px; left: 15px; right: 15px; background: #333; color: white; padding: 15px; border-radius: 20px; display: none; justify-content: space-between; align-items: center; z-index: 1000; }
    </style>
</head>
<body>
    <div class="header d-flex justify-content-between align-items-center">
        <div><h5 class="fw-bold mb-0">GIBRAN STORE</h5><small id="userTxt"></small></div>
        <div class="d-flex gap-3"><a href="riwayat.html" class="text-white text-decoration-none">üìú</a><a href="pengaturan.html" class="text-white text-decoration-none">‚öôÔ∏è</a></div>
    </div>

    <div class="container mt-3">
        <div class="row g-3" id="grid"></div>
    </div>

    <div class="cart-bar" id="bar">
        <div><span id="jml" class="badge bg-warning text-dark">0</span> <b id="tot">Rp 0</b></div>
        <button class="btn btn-warning btn-sm fw-bold" onclick="window.location.href='pembayaran.html'">Lanjut ‚ûî</button>
    </div>

    <script>
        document.getElementById('userTxt').innerText = "Halo, " + localStorage.getItem('namaUser');
        const menu = [
            {n:'Peye Kacang', h:5000, i:'ü•ú'}, {n:'Slondok Gurih', h:20000, i:'ü•®'},
            {n:'Opak Renyah', h:20000, i:'üç™'}, {n:'Kripik Pedas', h:15000, i:'üî•'},
            {n:'Aqua Galon', h:22000, i:'üíß'}, {n:'Kue Sus', h:15000, i:'üßÅ'}
        ];
        const grid = document.getElementById('grid');
        menu.forEach(p => {
            grid.innerHTML += `<div class="col-6"><div class="card card-produk p-3 shadow-sm">
                <div style="font-size:35px">${p.i}</div><h6 class="fw-bold small mt-2">${p.n}</h6>
                <p class="small fw-bold text-danger">Rp ${p.h.toLocaleString()}</p>
                <button class="btn-add" onclick="beli('${p.n}', ${p.h})">Tambah</button>
            </div></div>`;
        });

        let cart = [];
        function beli(n, h) {
            cart.push({n, h});
            document.getElementById('bar').style.display = 'flex';
            let t = cart.reduce((s, i) => s + i.h, 0);
            document.getElementById('jml').innerText = cart.length;
            document.getElementById('tot').innerText = 'Rp ' + t.toLocaleString();
            localStorage.setItem('totalTerakhir', t);
            localStorage.setItem('detailPesanan', cart.map(i => i.n).join(', '));
        }
    </script>
</body>
</html>
