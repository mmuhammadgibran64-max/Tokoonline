<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Menu - GIBRAN STORE</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body { background: #f4f4f4; padding-bottom: 100px; }
        .header { background: #ff6600; color: white; padding: 15px; border-radius: 0 0 15px 15px; }
        .card-p { border: none; border-radius: 15px; text-align: center; }
        .btn-beli { background: #ff6600; color: white; border: none; border-radius: 8px; width: 100%; font-weight: bold; }
        .cart-bar { position: fixed; bottom: 15px; left: 15px; right: 15px; background: #333; color: white; padding: 15px; border-radius: 15px; display: none; justify-content: space-between; align-items: center; }
    </style>
</head>
<body>
    <div class="header d-flex justify-content-between">
        <b id="hi">Halo!</b>
        <div class="d-flex gap-3"><a href="riwayat.html" class="text-white">ðŸ“œ</a> <a href="index.html" onclick="localStorage.clear()" class="text-white">ðŸšª</a></div>
    </div>

    <div class="container mt-3">
        <div class="row g-2" id="list"></div>
    </div>

    <div class="cart-bar" id="bar">
        <b id="tot">Rp 0</b>
        <button class="btn btn-warning btn-sm fw-bold" onclick="window.location.href='pembayaran.html'">Bayar âž”</button>
    </div>

    <script>
        document.getElementById('hi').innerText = "Halo, " + localStorage.getItem('namaUser');
        const menu = [
            {n:'Peye Kacang', h:5000, i:'ðŸ¥œ'}, {n:'Slondok', h:20000, i:'ðŸ¥¨'},
            {n:'Opak', h:20000, i:'ðŸª'}, {n:'Kue Sus', h:15000, i:'ðŸ§'}
        ];
        let cart = [];
        menu.forEach(p => {
            document.getElementById('list').innerHTML += `<div class="col-6"><div class="card card-p p-3 shadow-sm">
                <div style="font-size:30px">${p.i}</div><h6 class="fw-bold mt-1 mb-1">${p.n}</h6>
                <p class="text-danger fw-bold small">Rp ${p.h.toLocaleString()}</p>
                <button class="btn-beli py-1" onclick="tambah('${p.n}', ${p.h})">Tambah</button>
            </div></div>`;
        });

        function tambah(n, h) {
            cart.push({n, h});
            document.getElementById('bar').style.display = 'flex';
            let total = cart.reduce((s, i) => s + i.h, 0);
            document.getElementById('tot').innerText = 'Rp ' + total.toLocaleString();
            localStorage.setItem('totalTerakhir', total);
            localStorage.setItem('detailPesanan', cart.map(i => i.n).join(', '));
        }
    </script>
</body>
</html>
