<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Toko Gibran</title>
    <style>
        body { font-family: sans-serif; background: #28a745; display: flex; justify-content: center; align-items: center; height: 100vh; margin: 0; overflow: hidden; }
        .box { background: white; padding: 30px; border-radius: 15px; width: 85%; max-width: 350px; text-align: center; }
        input { width: 100%; padding: 12px; margin: 10px 0; border: 1px solid #ddd; border-radius: 8px; box-sizing: border-box; }
        button { width: 100%; padding: 12px; background: #28a745; color: white; border: none; border-radius: 8px; font-weight: bold; cursor: pointer; }

        /* LAYAR MAINTENANCE */
        #maintenance-screen {
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: #121212; z-index: 9999; flex-direction: column; justify-content: center; align-items: center; text-align: center; color: white; padding: 20px;
        }
        .m-card { background: #1e1e1e; padding: 35px; border-radius: 25px; border: 2px solid #ffc107; box-shadow: 0 0 20px rgba(255,193,7,0.3); }
        .spinner { border: 4px solid rgba(255, 255, 255, 0.1); border-left-color: #ffc107; border-radius: 50%; width: 40px; height: 40px; animation: spin 1s linear infinite; margin: 20px auto; }
        @keyframes spin { to { transform: rotate(360deg); } }
    </style>
</head>
<body>

    <div id="maintenance-screen">
        <div class="m-card">
            <h1 style="color: #ffc107; margin-bottom: 10px;">MAINTENANCE</h1>
            <div class="spinner"></div>
            <p style="line-height: 1.6;">Mohon maaf, saat ini sistem sedang dalam pemeliharaan rutin.<br><br>Silakan coba akses kembali beberapa saat lagi.</p>
            <p style="font-size: 12px; color: #666; margin-top: 20px;">Toko Gibran Â© 2026</p>
        </div>
    </div>

    <div class="box">
        <h2>Toko Gibran</h2>
        <p>Login untuk mulai belanja</p>
        <input type="text" id="nama" placeholder="Nama Pelanggan">
        <input type="number" id="hp" placeholder="Nomor HP">
        <input type="text" id="alamat" placeholder="Alamat Rumah">
        <button onclick="masuk()">MASUK KE TOKO</button>
    </div>

    <script>
        /* CARA PAKAI:
           - Ganti SEDANG_UPDATE ke 'true' jika kamu lagi benerin aplikasi (User tidak bisa masuk).
           - Ganti ke 'false' jika update sudah selesai (User bisa masuk, kecuali hari Senin/Kamis).
        */
        const SEDANG_UPDATE = false; 

        function checkSystem() {
            const screen = document.getElementById('maintenance-screen');
            
            // 1. Cek Kunci Manual (Update dari Gibran)
            if (SEDANG_UPDATE) {
                screen.style.display = 'flex';
                return;
            }

            // 2. Cek Jadwal Otomatis (Senin & Kamis jam 8 pagi)
            const now = new Date();
            const day = now.getDay(); 
            const hour = now.getHours();
            
            let isMaintenance = false;
            // Senin (1) jam 8 pagi sampai Selasa (2) jam 8 pagi
            if ((day === 1 && hour >= 8) || (day === 2 && hour < 8)) isMaintenance = true;
            // Kamis (4) jam 8 pagi sampai Jumat (5) jam 8 pagi
            if ((day === 4 && hour >= 8) || (day === 5 && hour < 8)) isMaintenance = true;

            if (isMaintenance) {
                screen.style.display = 'flex';
            }
        }

        function masuk() {
            const nama = document.getElementById('nama').value;
            const hp = document.getElementById('hp').value;
            const alamat = document.getElementById('alamat').value;
            if(!nama || !hp || !alamat) return alert("Harap isi semua data!");

            localStorage.setItem("nama", nama);
            localStorage.setItem("hp", hp);
            localStorage.setItem("alamat", alamat);

            const scriptURL = 'https://script.google.com/macros/s/AKfycbxDtiWgsJb1mBmeondxkgZV1zkRR1300rAKJMM7uZqgRckAYIm_w8VMCnMiYaW5anM/exec';
            
            fetch(scriptURL, { 
                method: 'POST', 
                mode: 'no-cors', 
                body: JSON.stringify({"type": "login", "nama": nama, "hp": hp, "alamat": alamat}) 
            })
            .then(() => { 
                window.location.href = 'dashboard.html'; 
            })
            .catch(() => alert("Koneksi gagal!"));
        }

        window.onload = checkSystem;
    </script>
</body>
</html>
