<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gibran Store</title>
    <style>
        body { font-family: 'Segoe UI', sans-serif; background: #000; color: #fff; margin: 0; display: flex; justify-content: center; align-items: center; height: 100vh; overflow: hidden; }
        #app { text-align: center; width: 85%; max-width: 350px; }
        
        /* LOGO GIBRAN STORE */
        .logo-box {
            width: 130px; height: 130px; margin: 0 auto 25px;
            border-radius: 50%; border: 4px solid #ff9800;
            overflow: hidden; box-shadow: 0 0 25px rgba(255,152,0,0.4);
            cursor: pointer; transition: 0.3s;
        }
        .logo-box img { width: 100%; height: 100%; object-fit: cover; }
        .logo-box:active { transform: scale(0.95); }

        /* TAMPILAN MAINTENANCE */
        .status-box { background: #111; padding: 25px; border-radius: 25px; border: 1px solid #222; }
        h2 { color: #ff9800; margin: 0 0 10px; }
        p { color: #888; font-size: 14px; margin-bottom: 20px; }
        .btn-cek { background: #ff9800; color: #000; border: none; padding: 15px; border-radius: 12px; font-weight: bold; width: 100%; cursor: pointer; }

        /* FORM LOGIN (AWALNYA SEMBUNYI) */
        #login-view { display: none; }
        input, textarea { width: 100%; padding: 12px; margin: 8px 0; border-radius: 10px; border: 1px solid #333; background: #222; color: #fff; box-sizing: border-box; }
        .btn-daftar { width: 100%; padding: 15px; background: #ff9800; color: #000; border: none; border-radius: 12px; font-weight: bold; margin-top: 10px; cursor: pointer; }
    </style>
</head>
<body>

    <div id="app">
        <div class="logo-box" onclick="bukaLogin()">
            <img src="https://i.ibb.co.com/mC6T49Y9/zTWVHGsp.jpg" alt="Logo Gibran Store">
        </div>

        <div id="main-view" class="status-box">
            <h2>MAINTENANCE</h2>
            <p>Sedang memperbarui daftar harga jajanan. Kembali jam 21:00 WIB.</p>
            <button class="btn-cek" onclick="bukaLogin()">LOGIN ADMIN</button>
        </div>

        <div id="login-view" class="status-box">
            <h3 style="color:#ff9800; margin-top:0;">DATA PELANGGAN</h3>
            <input type="text" id="nama" placeholder="Nama Lengkap">
            <input type="number" id="hp" placeholder="Nomor WhatsApp">
            <textarea id="alamat" placeholder="Alamat Rumah" rows="3"></textarea>
            <button class="btn-daftar" onclick="simpanData()">SIMPAN & MASUK</button>
        </div>
    </div>

    <script>
        const scriptURL = 'https://script.google.com/macros/s/AKfycby1ihg0h4F93-PWkrl0R842P4sj0inewTyVB9a2NkNrRfA43dvOsZrsTPuIEyvdKY27zA/exec';

        function bukaLogin() {
            document.getElementById('main-view').style.display = 'none';
            document.getElementById('login-view').style.display = 'block';
        }

        function simpanData() {
            const n = document.getElementById('nama').value;
            const h = document.getElementById('hp').value;
            const a = document.getElementById('alamat').value;

            if(n && h && a) {
                // Simpan ke HP User
                localStorage.setItem("nama", n);
                localStorage.setItem("hp", h);
                localStorage.setItem("alamat", a);

                // Kirim ke Google Sheet
                fetch(scriptURL, {
                    method: 'POST', mode: 'no-cors',
                    body: JSON.stringify({ "tipe": "USER_BARU", "nama": n, "hp": h, "alamat": a })
                }).then(() => {
                    window.location.href = "dashboard.html";
                });
            } else {
                alert("Lengkapi data dulu, Bran!");
            }
        }
    </script>
</body>
</html>
